<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/.github/workflows/ci-integration-tests.yml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/.github/workflows/ci-integration-tests.yml" />
              <option name="originalContent" value="# CI workflow: run backend integration tests against MySQL service&#10;# - Starts a MySQL service container&#10;# - Waits for DB readiness&#10;# - Creates the `shoeshop_test` database&#10;# - Runs `mvn` in the back-end module with profile `test`&#10;name: Backend Integration Tests (MySQL)&#10;&#10;on:&#10;  push:&#10;    branches: [ main, develop, junit-integration-tests ]&#10;  pull_request:&#10;    branches: [ main, develop ]&#10;  workflow_dispatch: {}&#10;&#10;&#10;jobs:&#10;  integration-tests:&#10;    runs-on: ubuntu-latest&#10;&#10;    services:&#10;      mysql:&#10;        image: mysql:8.0&#10;        env:&#10;          MYSQL_ROOT_PASSWORD: 123456&#10;        ports:&#10;          - 3306:3306&#10;        options: &gt;-&#10;          --health-cmd=&quot;mysqladmin ping --silent&quot;&#10;          --health-interval=5s&#10;          --health-timeout=5s&#10;          --health-retries=10&#10;&#10;    env:&#10;      TEST_DB_URL: jdbc:mysql://127.0.0.1:3306/shoeshop_test?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC&amp;createDatabaseIfNotExist=true&#10;      TEST_DB_USERNAME: root&#10;      TEST_DB_PASSWORD: 123456&#10;      MAVEN_OPTS: -Xmx2g&#10;&#10;    steps:&#10;      - name: Checkout code&#10;        uses: actions/checkout@v4&#10;&#10;      - name: Set up JDK 21 (Temurin)&#10;        uses: actions/setup-java@v4&#10;        with:&#10;          distribution: 'temurin'&#10;          java-version: '21'&#10;&#10;      - name: Cache Maven local repository&#10;        uses: actions/cache@v4&#10;        with:&#10;          path: ~/.m2/repository&#10;          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}&#10;          restore-keys: |&#10;            ${{ runner.os }}-maven-&#10;&#10;      - name: Wait for MySQL to be ready&#10;        run: |&#10;          sudo apt-get update -y&#10;          sudo apt-get install -y default-mysql-client&#10;          for i in $(seq 1 30); do&#10;            mysql -h 127.0.0.1 -P 3306 -u root -p&quot;${{ env.TEST_DB_PASSWORD }}&quot; -e &quot;SELECT 1&quot; &amp;&amp; break&#10;            echo &quot;Waiting for MySQL... ($i)&quot;&#10;            sleep 2&#10;          done&#10;&#10;      - name: Create test database&#10;        run: |&#10;          mysql -h 127.0.0.1 -P 3306 -u root -p&quot;${{ env.TEST_DB_PASSWORD }}&quot; -e &quot;CREATE DATABASE IF NOT EXISTS shoeshop_test CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;&quot;&#10;&#10;      - name: Run backend tests (maven)&#10;        working-directory: back-end&#10;        run: mvn -Dspring.profiles.active=test -DskipTests=false test&#10;        # If you want to run a single test class to speed up CI, replace the command with:&#10;        # mvn -Dspring.profiles.active=test -DskipTests=false -Dtest=AuthControllerTest test&#10;&#10;" />
              <option name="updatedContent" value="# CI workflow: run backend integration tests against MySQL service&#10;# - Starts a MySQL service container&#10;# - Waits for DB readiness&#10;# - Creates the `shoeshop_test` database&#10;# - Runs `mvn` in the back-end module with profile `test`&#10;name: Backend Integration Tests (MySQL)&#10;&#10;on:&#10;  push:&#10;    branches: [ main, develop, junit-integration-tests ]&#10;  pull_request:&#10;    branches: [ main, develop ]&#10;  workflow_dispatch: {}&#10;&#10;&#10;jobs:&#10;  integration-tests:&#10;    runs-on: ubuntu-latest&#10;&#10;    services:&#10;      mysql:&#10;        image: mysql:8.0&#10;        env:&#10;          MYSQL_ROOT_PASSWORD: 123456&#10;        ports:&#10;          - 3306:3306&#10;        options: &gt;-&#10;          --health-cmd=&quot;mysqladmin ping --silent&quot;&#10;          --health-interval=5s&#10;          --health-timeout=5s&#10;          --health-retries=10&#10;&#10;    env:&#10;      TEST_DB_URL: jdbc:mysql://127.0.0.1:3306/shoeshop_test?useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=UTC&amp;createDatabaseIfNotExist=true&#10;      TEST_DB_USERNAME: root&#10;      TEST_DB_PASSWORD: 123456&#10;      MAVEN_OPTS: -Xmx2g&#10;&#10;    steps:&#10;      - name: Checkout code&#10;        uses: actions/checkout@v4&#10;&#10;      - name: Set up JDK 21 (Temurin)&#10;        uses: actions/setup-java@v4&#10;        with:&#10;          distribution: 'temurin'&#10;          java-version: '21'&#10;&#10;      - name: Cache Maven local repository&#10;        uses: actions/cache@v4&#10;        with:&#10;          path: ~/.m2/repository&#10;          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}&#10;          restore-keys: |&#10;            ${{ runner.os }}-maven-&#10;&#10;      - name: Wait for MySQL to be ready&#10;        run: |&#10;          sudo apt-get update -y&#10;          sudo apt-get install -y default-mysql-client&#10;          for i in $(seq 1 30); do&#10;            mysql -h 127.0.0.1 -P 3306 -u root -p&quot;${{ env.TEST_DB_PASSWORD }}&quot; -e &quot;SELECT 1&quot; &amp;&amp; break&#10;            echo &quot;Waiting for MySQL... ($i)&quot;&#10;            sleep 2&#10;          done&#10;&#10;      - name: Create test database&#10;        run: |&#10;          mysql -h 127.0.0.1 -P 3306 -u root -p&quot;${{ env.TEST_DB_PASSWORD }}&quot; -e &quot;CREATE DATABASE IF NOT EXISTS shoeshop_test CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;&quot;&#10;&#10;      - name: Run backend tests (maven)&#10;        working-directory: back-end&#10;        run: mvn -Dspring.profiles.active=test -DskipTests=false test&#10;        # If you want to run a single test class to speed up CI, replace the command with:&#10;        # mvn -Dspring.profiles.active=test -DskipTests=false -Dtest=AuthControllerTest test&#10;&#10;      - name: Run auth JUnit test (maven)&#10;        working-directory: back-end&#10;        env:&#10;          TEST_DB_URL: ${{ env.TEST_DB_URL }}&#10;          TEST_DB_USERNAME: ${{ env.TEST_DB_USERNAME }}&#10;          TEST_DB_PASSWORD: ${{ env.TEST_DB_PASSWORD }}&#10;        run: |&#10;          # Run only the AuthControllerTest to speed up CI and make debugging faster&#10;          mvn -Dspring.profiles.active=test -DskipTests=false -Dtest=AuthControllerTest test&#10;&#10;      - name: Print JUnit test summary (parse surefire XML)&#10;        if: always()&#10;        run: |&#10;          echo &quot;=== JUnit surefire summary ===&quot;&#10;          sudo apt-get update -y&#10;          sudo apt-get install -y xmlstarlet || true&#10;          REPORT_DIR=back-end/target/surefire-reports&#10;          if [ ! -d &quot;$REPORT_DIR&quot; ]; then&#10;            echo &quot;No surefire reports found at $REPORT_DIR&quot;&#10;            exit 0&#10;          fi&#10;&#10;          for f in $REPORT_DIR/TEST-*.xml; do&#10;            [ -e &quot;$f&quot; ] || continue&#10;            echo &quot;---- Suite: $f ----&quot;&#10;            # print suite summary&#10;            xmlstarlet sel -t -m &quot;/testsuite&quot; -v &quot;concat('tests=',@tests,' failures=',@failures,' errors=',@errors,' skipped=',@skipped,' time=',@time)&quot; -n &quot;$f&quot;&#10;            echo &quot;Testcases:&quot; &#10;            # print each testcase with counts of failure and error&#10;            xmlstarlet sel -t -m &quot;/testsuite/testcase&quot; -v &quot;concat(@classname,'::',@name,'|time=',@time,'|failures=',count(failure),'|errors=',count(error))&quot; -n &quot;$f&quot; | \&#10;              awk -F'|' '{ split($1,a,&quot;:&quot;); status=&quot;PASSED&quot;; if ($3+0 &gt; 0) status=&quot;FAILED&quot;; if ($4+0 &gt; 0) status=&quot;ERROR&quot;; printf &quot;%s %s - %s\n&quot;, a[1]&quot;::&quot;a[2], status, $2 }'&#10;            echo&#10;          done&#10;&#10;      - name: Upload surefire reports&#10;        if: always()&#10;        uses: actions/upload-artifact@v4&#10;        with:&#10;          name: surefire-reports&#10;          path: back-end/target/surefire-reports/**&#10;&#10;      - name: Upload full target (optional)&#10;        if: always()&#10;        uses: actions/upload-artifact@v4&#10;        with:&#10;          name: back-end-target&#10;          path: back-end/target/**" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>